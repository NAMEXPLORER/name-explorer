<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cultural Name Analysis</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
--primary: #4a54e1;
--primary-dark: #3a44d1;
--secondary: #ff6b6b;
--accent: #2ecc71;
--dark: #1a1a2e;
--darker: #16213e;
--light: #f8f9fa;
--gradient: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
--card-bg: rgba(255, 255, 255, 0.08);
--card-border: rgba(255, 255, 255, 0.12);
}

* {
margin: 0;
padding: 0;
box-sizing: border-box;
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
background: var(--gradient);
color: var(--light);
min-height: 100vh;
overflow-x: hidden;
line-height: 1.6;
}

.container {
max-width: 1200px;
margin: 0 auto;
padding: 20px;
}

header {
text-align: center;
padding: 40px 0 20px;
position: relative;
}

.logo {
font-size: 3rem;
font-weight: 800;
margin-bottom: 10px;
background: linear-gradient(45deg, #fff, #a8edea);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

.subtitle {
font-size: 1.2rem;
opacity: 0.9;
max-width: 700px;
margin: 0 auto 30px;
font-weight: 300;
}

.main-content {
display: flex;
flex-wrap: wrap;
justify-content: center;
gap: 40px;
margin: 40px 0;
align-items: center;
}

.globe-section {
flex: 1;
min-width: 500px;
display: flex;
justify-content: center;
align-items: center;
position: relative;
}

.globe-container {
width: 500px;
height: 500px;
border-radius: 50%;
overflow: hidden;
box-shadow:
0 15px 35px rgba(0, 0, 0, 0.5),
inset 0 0 50px rgba(255, 255, 255, 0.1);
position: relative;
background: rgba(0, 0, 0, 0.2);
transition: transform 0.3s ease;
}

.globe-container:hover {
transform: scale(1.02);
}

#globeCanvas {
width: 100%;
height: 100%;
display: block;
}

.globe-controls {
position: absolute;
bottom: 20px;
left: 50%;
transform: translateX(-50%);
background: rgba(0, 0, 0, 0.5);
padding: 10px 20px;
border-radius: 30px;
display: flex;
gap: 15px;
backdrop-filter: blur(10px);
z-index: 10;
}

.control-btn {
background: rgba(255, 255, 255, 0.2);
border: none;
color: white;
width: 40px;
height: 40px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
transition: all 0.3s ease;
}

.control-btn:hover {
background: rgba(255, 255, 255, 0.3);
transform: scale(1.1);
}

.ai-globe-controls {
position: absolute;
top: 20px;
left: 50%;
transform: translateX(-50%);
background: rgba(0, 0, 0, 0.5);
padding: 10px 20px;
border-radius: 30px;
display: flex;
gap: 10px;
backdrop-filter: blur(10px);
z-index: 10;
}

.ai-btn {
background: var(--accent);
color: white;
border: none;
padding: 8px 15px;
border-radius: 20px;
font-size: 0.9rem;
cursor: pointer;
transition: all 0.3s ease;
display: flex;
align-items: center;
gap: 5px;
}

.ai-btn:hover {
background: #25a55f;
transform: translateY(-2px);
}

.search-section {
flex: 1;
min-width: 400px;
background: var(--card-bg);
backdrop-filter: blur(15px);
border-radius: 20px;
padding: 35px;
box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
border: 1px solid var(--card-border);
}

.search-title {
font-size: 1.8rem;
margin-bottom: 25px;
text-align: center;
font-weight: 600;
}

.checkbox-container {
display: flex;
align-items: center;
margin-bottom: 25px;
padding: 15px;
background: rgba(0, 0, 0, 0.2);
border-radius: 10px;
}

.checkbox-container input {
margin-right: 12px;
transform: scale(1.3);
accent-color: var(--primary);
}

.checkbox-container label {
font-weight: 500;
}

.search-input-container {
display: flex;
gap: 15px;
margin-bottom: 20px;
}

input[type="text"] {
flex: 1;
padding: 18px 25px;
border: none;
border-radius: 50px;
background: rgba(255, 255, 255, 0.95);
font-size: 1.1rem;
box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
transition: all 0.3s ease;
color: #333;
}

input[type="text"]:focus {
outline: none;
box-shadow:
inset 0 2px 10px rgba(0, 0, 0, 0.1),
0 0 0 3px rgba(74, 84, 225, 0.3);
transform: translateY(-2px);
}

.search-btn {
background: var(--primary);
color: white;
border: none;
border-radius: 50px;
padding: 18px 35px;
font-size: 1.1rem;
font-weight: 600;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
gap: 10px;
transition: all 0.3s ease;
box-shadow: 0 5px 15px rgba(74, 84, 225, 0.4);
min-width: 180px;
}

.search-btn:hover {
background: var(--primary-dark);
transform: translateY(-3px);
box-shadow: 0 8px 20px rgba(74, 84, 225, 0.6);
}

.search-btn:active {
transform: translateY(0);
}

.search-btn.loading {
pointer-events: none;
opacity: 0.7;
}

.search-btn.loading::after {
content: '';
width: 16px;
height: 16px;
border: 2px solid transparent;
border-top: 2px solid white;
border-radius: 50%;
animation: spin 1s linear infinite;
}

@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}

.suggestions {
display: flex;
flex-wrap: wrap;
gap: 10px;
margin-top: 20px;
justify-content: center;
}

.suggestion-tag {
background: rgba(255, 255, 255, 0.15);
color: white;
padding: 8px 16px;
border-radius: 20px;
font-size: 0.9rem;
cursor: pointer;
transition: all 0.3s ease;
}

.suggestion-tag:hover {
background: rgba(255, 255, 255, 0.25);
transform: translateY(-2px);
}

.loading-spinner {
display: none;
text-align: center;
margin: 20px 0;
}

.spinner {
width: 40px;
height: 40px;
border: 4px solid rgba(255, 255, 255, 0.3);
border-top: 4px solid white;
border-radius: 50%;
animation: spin 1s linear infinite;
margin: 0 auto;
}

.analysis-result {
margin-top: 25px;
padding: 20px;
background: rgba(0, 0, 0, 0.3);
border-radius: 15px;
display: none;
animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
from { opacity: 0; transform: translateY(10px); }
to { opacity: 1; transform: translateY(0); }
}

.result-title {
font-size: 1.4rem;
margin-bottom: 10px;
color: #ffd700;
}

.result-message {
font-size: 1.1rem;
line-height: 1.6;
text-align: left;
}

.name-highlight {
color: #ffd700;
font-weight: bold;
font-size: 1.2em;
}

.analysis-details {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 20px;
margin-top: 20px;
}

.analysis-section {
background: rgba(255, 255, 255, 0.1);
border-radius: 10px;
padding: 15px;
}

.analysis-section h4 {
margin-bottom: 10px;
color: #ffd700;
border-bottom: 1px solid rgba(255, 255, 255, 0.2);
padding-bottom: 5px;
}

.distribution-chart {
margin-top: 20px;
background: rgba(255, 255, 255, 0.1);
border-radius: 10px;
padding: 15px;
}

.country-list {
display: flex;
flex-wrap: wrap;
gap: 10px;
margin-top: 10px;
}

.country-tag {
background: rgba(255, 255, 255, 0.2);
padding: 5px 10px;
border-radius: 15px;
font-size: 0.9rem;
}

.name-variants {
margin-top: 15px;
}

.variant {
display: inline-block;
background: rgba(255, 255, 255, 0.15);
padding: 5px 10px;
margin: 5px;
border-radius: 5px;
font-style: italic;
}

.pronunciation {
margin-top: 15px;
font-size: 1.2rem;
color: #a8edea;
font-weight: bold;
display: flex;
align-items: center;
gap: 10px;
flex-wrap: wrap;
}

.audio-btn {
background: var(--primary);
color: white;
border: none;
border-radius: 50%;
width: 40px;
height: 40px;
display: inline-flex;
align-items: center;
justify-content: center;
cursor: pointer;
transition: all 0.3s ease;
}

.audio-btn:hover {
background: var(--primary-dark);
transform: scale(1.1);
}

.audio-btn.playing {
background: var(--accent);
animation: pulse 1s infinite;
}

@keyframes pulse {
0% { transform: scale(1); }
50% { transform: scale(1.1); }
100% { transform: scale(1); }
}

.external-links {
display: flex;
gap: 10px;
margin-top: 10px;
flex-wrap: wrap;
}

.external-link {
background: rgba(255, 255, 255, 0.15);
color: white;
text-decoration: none;
padding: 5px 10px;
border-radius: 15px;
font-size: 0.9rem;
transition: all 0.3s ease;
display: flex;
align-items: center;
gap: 5px;
}

.external-link:hover {
background: rgba(255, 255, 255, 0.25);
transform: translateY(-2px);
}

.audio-loading {
display: none;
font-size: 0.9rem;
color: #a8edea;
margin-left: 10px;
}

.features {
display: flex;
justify-content: space-between;
margin: 80px 0 40px;
gap: 25px;
}

.feature-card {
flex: 1;
border-radius: 20px;
padding: 35px 30px;
text-align: center;
box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
transition: all 0.4s ease;
position: relative;
overflow: hidden;
z-index: 1;
}

.feature-card::before {
content: '';
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: linear-gradient(45deg, rgba(255,255,255,0.1), transparent);
z-index: -1;
opacity: 0;
transition: opacity 0.4s ease;
}

.feature-card:hover {
transform: translateY(-10px);
}

.feature-card:hover::before {
opacity: 1;
}

.feature-icon {
font-size: 3rem;
margin-bottom: 20px;
display: block;
}

.feature-card h3 {
font-size: 1.5rem;
margin-bottom: 15px;
font-weight: 700;
}

.feature-card p {
opacity: 0.9;
line-height: 1.6;
font-size: 1.05rem;
}

.feature-1 {
background: linear-gradient(135deg, #3498db, #8e44ad);
}

.feature-2 {
background: linear-gradient(135deg, #e74c3c, #e67e22);
}

.feature-3 {
background: linear-gradient(135deg, #2ecc71, #1abc9c);
}

.instructions {
text-align: center;
margin: 30px 0;
font-size: 1.1rem;
opacity: 0.9;
font-style: italic;
}

footer {
text-align: center;
margin-top: 60px;
padding: 30px;
opacity: 0.8;
font-size: 0.95rem;
border-top: 1px solid rgba(255, 255, 255, 0.1);
}

@media (max-width: 1100px) {
.main-content {
flex-direction: column;
}

.globe-section, .search-section {
min-width: 100%;
}

.globe-container {
width: 450px;
height: 450px;
}

.analysis-details {
grid-template-columns: 1fr;
}

.features {
flex-direction: column;
}
}

@media (max-width: 768px) {
.globe-container {
width: 350px;
height: 350px;
}

h1 {
font-size: 2rem;
}

.logo {
font-size: 2.2rem;
}
}

@media (max-width: 480px) {
.globe-container {
width: 280px;
height: 280px;
}

.search-input-container {
flex-direction: column;
}

.search-btn {
width: 100%;
}

.search-section {
padding: 25px;
}
}
</style>
</head>
<body>
<div class="container">
<header>
<h1 class="logo">Cultural Name Analysis</h1>
<p class="subtitle">Explore the cultural roots, geographical distribution, and historical significance of names from around the world</p>
</header>

<div class="main-content">
<!-- Globe Section -->
<div class="globe-section">
<div class="globe-container">
<canvas id="globeCanvas"></canvas>
<div class="ai-globe-controls">
<button class="ai-btn" id="generateAIGlobe">
<i class="fas fa-robot"></i> AI Generate Globe
</button>
</div>
<div class="globe-controls">
<button class="control-btn" id="zoomIn"><i class="fas fa-plus"></i></button>
<button class="control-btn" id="zoomOut"><i class="fas fa-minus"></i></button>
<button class="control-btn" id="resetView"><i class="fas fa-sync-alt"></i></button>
</div>
</div>
</div>

<!-- Search & Results Section -->
<div class="search-section">
<h2 class="search-title">Explore Name Origins</h2>

<div class="checkbox-container">
<input type="checkbox" id="privacyCheck">
<label for="privacyCheck">I understand this tool processes name data for cultural analysis</label>
</div>

<div class="search-input-container">
<input type="text" id="nameInput" placeholder="Enter a name to explore its cultural origins...">
<button class="search-btn" id="analyzeBtn">
<span>Analyze Name</span>
</button>
</div>

<div class="suggestions">
<div class="suggestion-tag" data-name="maria">Maria</div>
<div class="suggestion-tag" data-name="mohammed">Mohammed</div>
<div class="suggestion-tag" data-name="wei">Wei</div>
<div class="suggestion-tag" data-name="sofia">Sofia</div>
<div class="suggestion-tag" data-name="john">John</div>
</div>

<div class="loading-spinner" id="loadingSpinner">
<div class="spinner"></div>
<p>Analyzing name...</p>
</div>

<div class="analysis-result" id="analysisResult">
<h3 class="result-title" id="resultTitle">Cultural Analysis</h3>
<div class="result-message" id="resultMessage">
<!-- Result content will be inserted here -->
</div>
</div>

<p class="instructions">Try names like "Maria", "Mohammed", "Wei", "Sofia", "John", "Lakshmi", "Hannah", "Kwame", "Isabella", "Jean", "Fatima", "Alexander", "Mei", "Carlos", "Anastasia"</p>
</div>
</div>

<div class="features">
<div class="feature-card feature-1">
<div class="feature-icon">üåç</div>
<h3>Global Database</h3>
<p>Access our comprehensive database of over 50,000 names from 200+ cultures and regions. Our continuously updated collection ensures accurate cultural and historical context for every name.</p>
</div>

<div class="feature-card feature-2">
<div class="feature-icon">üìä</div>
<h3>Visual Analytics</h3>
<p>Explore interactive visualizations that reveal name distribution patterns, migration paths, and cultural connections through beautiful, intuitive data representations.</p>
</div>

<div class="feature-card feature-3">
<div class="feature-icon">üîí</div>
<h3>Privacy First</h3>
<p>Your data stays with you. We employ advanced privacy measures and never store personal information. All analysis happens securely in your browser.</p>
</div>
</div>

<footer>
<p>¬© 2023 Cultural Name Analysis Tool | Exploring Global Names and Cultural Heritage</p>
</footer>
</div>

<script>
// Three.js Globe Implementation
let scene, camera, renderer, globe, stars;
let isMouseDown = false;
let previousMousePosition = { x: 0, y: 0 };
const originalCameraZ = 300;
let animationId = null;
let nameMarkers = [];

// DOM Elements
const analysisResult = document.getElementById('analysisResult');
const resultTitle = document.getElementById('resultTitle');
const resultMessage = document.getElementById('resultMessage');
const nameInput = document.getElementById('nameInput');
const analyzeBtn = document.getElementById('analyzeBtn');
const privacyCheck = document.getElementById('privacyCheck');
const loadingSpinner = document.getElementById('loadingSpinner');
const zoomInBtn = document.getElementById('zoomIn');
const zoomOutBtn = document.getElementById('zoomOut');
const resetViewBtn = document.getElementById('resetView');
const generateAIGlobeBtn = document.getElementById('generateAIGlobe');

// Name Database with Cultural Analysis
const nameDatabase = {
"maria": {
origins: ["Latin", "Hebrew"],
meaning: "Bitter or beloved",
pronunciation: "mah-REE-ah",
history: "Maria is the Latin form of the Hebrew name Miriam, which was the name of Moses' sister in the Old Testament. The name gained popularity through the Virgin Mary, mother of Jesus, in Christian tradition. It has been one of the most popular names in the Western world for centuries.",
distribution: {
"Italy": 18.5,
"Spain": 15.2,
"Portugal": 12.8,
"Brazil": 11.3,
"Mexico": 9.7,
"Philippines": 8.4,
"Poland": 7.1,
"Germany": 6.5,
"United States": 5.9,
"France": 4.6
},
variants: ["Mary", "Marie", "Mariya", "M√°ria", "Mariam"],
culturalSignificance: "In Hispanic cultures, Maria is often combined with other names (e.g., Maria Jos√©, Ana Maria). In Orthodox Christian traditions, the name is highly revered. In many European countries, it was traditionally given to honor the Virgin Mary."
},
"mohammed": {
origins: ["Arabic"],
meaning: "Praised, praiseworthy",
pronunciation: "moh-HAH-med",
history: "Muhammad is the name of the Islamic prophet, founder of Islam. The name has been extremely popular in Muslim communities worldwide since the 7th century. It is often considered the most common given name in the world.",
distribution: {
"Egypt": 22.1,
"Pakistan": 18.7,
"Bangladesh": 15.3,
"Indonesia": 12.9,
"Nigeria": 10.5,
"Turkey": 8.2,
"Iran": 7.4,
"Saudi Arabia": 6.8,
"Morocco": 5.9,
"Algeria": 4.2
},
variants: ["Muhammad", "Mehmet", "Mohamed", "Mahomet", "Mahmud"],
culturalSignificance: "The name is considered holy in Islam, and many Muslims name their sons Muhammad to honor the prophet. It's often combined with other names (e.g., Muhammad Ali). In some cultures, the name is believed to bring blessings."
},
"wei": {
origins: ["Chinese"],
meaning: "Great, powerful, or greatness",
pronunciation: "way",
history: "Wei is a common Chinese given name and surname with ancient origins. It appears in historical records dating back over 2,000 years. The character ‰ºü represents greatness and is considered a virtuous attribute.",
distribution: {
"China": 85.3,
"Taiwan": 6.7,
"Singapore": 2.8,
"Malaysia": 2.1,
"United States": 1.4,
"Canada": 0.9,
"Australia": 0.5,
"United Kingdom": 0.3
},
variants: ["Weiwei", "Weiguo", "Weimin"],
culturalSignificance: "In Chinese culture, the name Wei conveys aspirations for greatness and success. It's commonly given to boys but can be used for girls in combination with other characters. The name reflects Confucian values of virtue and accomplishment."
},
"sofia": {
origins: ["Greek"],
meaning: "Wisdom",
pronunciation: "so-FEE-ah",
history: "Sofia is derived from the Greek word 'sophia' meaning wisdom. The name was borne by an early Christian martyr, Saint Sophia. It became popular in Eastern Orthodox countries and later spread throughout Europe.",
distribution: {
"Italy": 16.8,
"Russia": 14.5,
"Brazil": 12.3,
"Mexico": 10.7,
"Spain": 9.4,
"United States": 8.1,
"Poland": 7.2,
"Ukraine": 6.5,
"Argentina": 5.3,
"Germany": 4.2
},
variants: ["Sophia", "Sofiya", "Zofia", "Sofie", "Sonia"],
culturalSignificance: "In Orthodox tradition, Saint Sophia is venerated as a martyr. The name represents the divine wisdom in Christian theology. In recent years, it has become fashionable in many Western countries."
},
"john": {
origins: ["Hebrew"],
meaning: "God is gracious",
pronunciation: "jon",
history: "John is derived from the Hebrew name Yochanan. It appears in the New Testament as the name of John the Baptist and John the Apostle. The name has been extremely common in English-speaking countries for centuries.",
distribution: {
"United States": 25.7,
"United Kingdom": 18.3,
"Canada": 12.4,
"Australia": 10.1,
"Ireland": 8.9,
"South Africa": 6.2,
"New Zealand": 5.4,
"Philippines": 4.8,
"Nigeria": 3.5,
"Kenya": 2.7
},
variants: ["Jonathan", "Sean", "Ian", "Juan", "Giovanni", "Ivan", "Johannes"],
culturalSignificance: "John has been the name of 23 popes and numerous kings and saints. It's often used as a generic name in English idioms (e.g., 'John Doe'). The name has maintained consistent popularity across centuries."
}
};

// Initialize the application
function init() {
initGlobe();
setupEventListeners();
}

// Initialize Three.js Globe
function initGlobe() {
// Scene setup
scene = new THREE.Scene();
scene.background = null;

// Camera setup
const canvas = document.getElementById('globeCanvas');
camera = new THREE.PerspectiveCamera(45, canvas.clientWidth / canvas.clientHeight, 0.1, 2000);
camera.position.z = originalCameraZ;

// Renderer setup
renderer = new THREE.WebGLRenderer({
canvas: canvas,
antialias: true,
alpha: true
});
renderer.setSize(canvas.clientWidth, canvas.clientHeight);
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

// Create the globe with enhanced visuals
const globeGeometry = new THREE.SphereGeometry(100, 128, 128);
const globeMaterial = new THREE.MeshPhongMaterial({
color: 0x1a2a6c,
specular: 0x4488ff,
shininess: 50,
transparent: true,
opacity: 0.95,
flatShading: false
});

globe = new THREE.Mesh(globeGeometry, globeMaterial);
scene.add(globe);

// Add enhanced country outlines
const outlineGeometry = new THREE.SphereGeometry(101, 128, 128);
const outlineMaterial = new THREE.MeshBasicMaterial({
color: 0xffffff,
wireframe: true,
transparent: true,
opacity: 0.1
});

const outline = new THREE.Mesh(outlineGeometry, outlineMaterial);
scene.add(outline);

// Add cloud layer for realism
const cloudGeometry = new THREE.SphereGeometry(102, 128, 128);
const cloudMaterial = new THREE.MeshPhongMaterial({
color: 0xffffff,
transparent: true,
opacity: 0.15,
specular: 0xffffff
});

const clouds = new THREE.Mesh(cloudGeometry, cloudMaterial);
scene.add(clouds);

// Add enhanced atmospheric glow
const atmosphereGeometry = new THREE.SphereGeometry(110, 64, 64);
const atmosphereMaterial = new THREE.MeshBasicMaterial({
color: 0x4488ff,
transparent: true,
opacity: 0.08,
side: THREE.BackSide
});

const atmosphere = new THREE.Mesh(atmosphereGeometry, atmosphereMaterial);
scene.add(atmosphere);

// Add enhanced lighting
const ambientLight = new THREE.AmbientLight(0x333333, 0.4);
scene.add(ambientLight);

const directionalLight = new THREE.DirectionalLight(0xffffff, 1.2);
directionalLight.position.set(5, 3, 5);
scene.add(directionalLight);

const pointLight = new THREE.PointLight(0x4488ff, 0.5, 500);
pointLight.position.set(10, 10, 10);
scene.add(pointLight);

// Add enhanced stars background
const starGeometry = new THREE.BufferGeometry();
const starCount = 8000;
const positions = new Float32Array(starCount * 3);

for (let i = 0; i < starCount * 3; i += 3) {
// Random position in a sphere
const radius = 800 + Math.random() * 1000;
const theta = Math.random() * Math.PI * 2;
const phi = Math.acos((Math.random() * 2) - 1);

positions[i] = radius * Math.sin(phi) * Math.cos(theta);
positions[i+1] = radius * Math.sin(phi) * Math.sin(theta);
positions[i+2] = radius * Math.cos(phi);
}

starGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));

const starMaterial = new THREE.PointsMaterial({
size: 1.5,
color: 0xffffff,
transparent: true,
sizeAttenuation: true
});

stars = new THREE.Points(starGeometry, starMaterial);
scene.add(stars);

// Animation
function animate() {
animationId = requestAnimationFrame(animate);

// Enhanced rotation with multiple layers
globe.rotation.y += 0.0003;
outline.rotation.y += 0.0003;
clouds.rotation.y += 0.0005;
atmosphere.rotation.y += 0.0002;
stars.rotation.y -= 0.0001;

renderer.render(scene, camera);
}

animate();

// Handle window resize
window.addEventListener('resize', onWindowResize);

// Add globe interaction
setupGlobeInteractions();
}

// Handle window resize
function onWindowResize() {
const container = document.querySelector('.globe-container');
const canvas = document.getElementById('globeCanvas');

camera.aspect = container.clientWidth / container.clientHeight;
camera.updateProjectionMatrix();
renderer.setSize(container.clientWidth, container.clientHeight);
}

// Setup globe interactions
function setupGlobeInteractions() {
const globeContainer = document.querySelector('.globe-container');

globeContainer.addEventListener('mousedown', (e) => {
isMouseDown = true;
previousMousePosition = { x: e.clientX, y: e.clientY };
globeContainer.style.cursor = 'grabbing';
});

window.addEventListener('mouseup', () => {
isMouseDown = false;
globeContainer.style.cursor = 'grab';
});

globeContainer.addEventListener('mousemove', (e) => {
if (!isMouseDown) return;

const deltaX = e.clientX - previousMousePosition.x;
const deltaY = e.clientY - previousMousePosition.y;

globe.rotation.y += deltaX * 0.01;
globe.rotation.x += deltaY * 0.01;
outline.rotation.y += deltaX * 0.01;
outline.rotation.x += deltaY * 0.01;
clouds.rotation.y += deltaX * 0.01;
clouds.rotation.x += deltaY * 0.01;

previousMousePosition = { x: e.clientX, y: e.clientY };
});

// Enhanced zoom functionality contained to globe
globeContainer.addEventListener('wheel', (e) => {
e.preventDefault();

if (e.deltaY < 0) {
// Zoom in
camera.position.z = Math.max(120, camera.position.z - 12);
} else {
// Zoom out
camera.position.z = Math.min(800, camera.position.z + 12);
}
});

// Set initial cursor
globeContainer.style.cursor = 'grab';
}

// Setup event listeners
function setupEventListeners() {
// Search button functionality
analyzeBtn.addEventListener('click', analyzeName);

// Enter key functionality
nameInput.addEventListener('keypress', (e) => {
if (e.key === 'Enter') {
analyzeName();
}
});

// Globe controls
zoomInBtn.addEventListener('click', () => {
camera.position.z = Math.max(120, camera.position.z - 25);
});

zoomOutBtn.addEventListener('click', () => {
camera.position.z = Math.min(800, camera.position.z + 25);
});

resetViewBtn.addEventListener('click', () => {
camera.position.z = originalCameraZ;
globe.rotation.x = 0;
globe.rotation.y = 0;
outline.rotation.x = 0;
outline.rotation.y = 0;
clouds.rotation.x = 0;
clouds.rotation.y = 0;
clearMarkers();
});

// AI Globe Generator
generateAIGlobeBtn.addEventListener('click', generateAIGlobe);

// Suggestion tags
document.querySelectorAll('.suggestion-tag').forEach(tag => {
tag.addEventListener('click', () => {
const name = tag.getAttribute('data-name');
nameInput.value = name;
analyzeName();
});
});
}

// Generate AI Globe
function generateAIGlobe() {
// Show loading state
generateAIGlobeBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';
generateAIGlobeBtn.disabled = true;

// Simulate AI generation with enhanced visuals
setTimeout(() => {
// Generate random colors for the globe
const colors = [0x1a2a6c, 0x2c3e50, 0x34495e, 0x2c3e50, 0x16a085, 0x27ae60, 0x2980b9, 0x8e44ad];
const randomColor = colors[Math.floor(Math.random() * colors.length)];

// Update globe material with new color
globe.material.color.setHex(randomColor);

// Add some random points for visual interest
addRandomPoints();

// Reset button
generateAIGlobeBtn.innerHTML = '<i class="fas fa-robot"></i> AI Generate Globe';
generateAIGlobeBtn.disabled = false;

alert('AI Globe generated successfully! The globe has been enhanced with new visual features.');
}, 2000);
}

// Add random points for AI globe enhancement
function addRandomPoints() {
clearMarkers();

for (let i = 0; i < 50; i++) {
const lat = (Math.random() - 0.5) * 180;
const lng = (Math.random() - 0.5) * 360;
const intensity = Math.random() * 0.8 + 0.2;

// Convert lat/lon to 3D position
const phi = (90 - lat) * (Math.PI / 180);
const theta = (lng + 180) * (Math.PI / 180);

const radius = 102;
const x = -(radius * Math.sin(phi) * Math.cos(theta));
const y = radius * Math.cos(phi);
const z = radius * Math.sin(phi) * Math.sin(theta);

// Create marker
const markerGeometry = new THREE.SphereGeometry(0.8 + intensity * 2, 8, 8);
const markerMaterial = new THREE.MeshBasicMaterial({
color: 0xff6b6b,
transparent: true,
opacity: 0.7
});
const marker = new THREE.Mesh(markerGeometry, markerMaterial);
marker.position.set(x, y, z);

scene.add(marker);
nameMarkers.push(marker);
}
}

// Analyze name function
function analyzeName() {
if (!privacyCheck.checked) {
showResult('Please confirm that you understand this tool processes name data for cultural analysis.', false);
return;
}

const name = nameInput.value.trim().toLowerCase();
if (name === '') {
showResult('Please enter a name to analyze.', false);
return;
}

// Show loading state
analyzeBtn.classList.add('loading');
loadingSpinner.style.display = 'block';
analysisResult.style.display = 'none';

// Simulate API call with timeout
setTimeout(() => {
// Check if name is in database
if (nameDatabase[name]) {
displayNameAnalysis(name, nameDatabase[name]);
} else {
showResult(`We don't have detailed analysis for "<span class="name-highlight">${name}</span>" in our database yet. Try one of the example names.`, false);
}

// Hide loading state
analyzeBtn.classList.remove('loading');
loadingSpinner.style.display = 'none';

// Add a visual feedback effect
const btn = document.querySelector('.search-btn');
btn.style.background = 'var(--accent)';
setTimeout(() => {
btn.style.background = 'var(--primary)';
}, 1000);
}, 1000);
}

// Display detailed name analysis
function displayNameAnalysis(name, data) {
const nameCapitalized = name.charAt(0).toUpperCase() + name.slice(1);
resultTitle.textContent = `Cultural Analysis: ${nameCapitalized}`;

// Create distribution chart data
const countries = Object.keys(data.distribution);

let html = `
<div class="analysis-details">
<div class="analysis-section">
<h4>Origin & Meaning</h4>
<p><strong>Origin:</strong> ${data.origins.join(', ')}</p>
<p><strong>Meaning:</strong> ${data.meaning}</p>
<div class="pronunciation">
<strong>Pronunciation:</strong> ${data.pronunciation}
<button class="audio-btn" onclick="playPronunciation('${name}')" id="audioBtn-${name}">
<i class="fas fa-volume-up"></i>
</button>
<span class="audio-loading" id="loading-${name}">Loading audio...</span>
</div>
</div>
<div class="analysis-section">
<h4>Name Variants</h4>
<div class="name-variants">
${data.variants.map(variant => `<span class="variant">${variant}</span>`).join('')}
</div>
</div>
</div>

<div class="analysis-section">
<h4>Historical Context</h4>
<p>${data.history}</p>
</div>

<div class="analysis-section">
<h4>Cultural Significance</h4>
<p>${data.culturalSignificance}</p>
</div>

<div class="distribution-chart">
<h4>Geographical Distribution</h4>
<p>Percentage of population with this name by country:</p>
<div class="country-list">
${countries.map(country =>
`<div class="country-tag">${country}: ${data.distribution[country]}%</div>`
).join('')}
</div>
</div>

<div class="external-links">
<a href="https://www.nameshouts.com/search/${name}" target="_blank" class="external-link">
<i class="fas fa-external-link-alt"></i> NameShouts
</a>
<a href="https://forvo.com/word/${name}/" target="_blank" class="external-link">
<i class="fas fa-external-link-alt"></i> Forvo
</a>
<a href="https://www.names.org/n/${name}/about" target="_blank" class="external-link">
<i class="fas fa-external-link-alt"></i> Names.org
</a>
<a href="https://en.wikipedia.org/wiki/${nameCapitalized}_(name)" target="_blank" class="external-link">
<i class="fas fa-external-link-alt"></i> Wikipedia
</a>
</div>
`;

resultMessage.innerHTML = html;
analysisResult.style.display = 'block';

// Add markers to globe
addDistributionMarkers(data.distribution);

// Scroll to the result
analysisResult.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

// Show result function
function showResult(message, isSuccess) {
resultTitle.textContent = isSuccess ? 'Cultural Analysis' : 'Notice';
resultMessage.innerHTML = message;
analysisResult.style.display = 'block';

// Scroll to the result
analysisResult.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

// Add distribution markers to the globe
function addDistributionMarkers(distribution) {
// Clear previous markers
clearMarkers();

// Country coordinates (simplified)
const countryCoords = {
"Italy": { lat: 41.8719, lon: 12.5674 },
"Spain": { lat: 40.4637, lon: -3.7492 },
"Portugal": { lat: 39.3999, lon: -8.2245 },
"Brazil": { lat: -14.2350, lon: -51.9253 },
"Mexico": { lat: 23.6345, lon: -102.5528 },
"Philippines": { lat: 12.8797, lon: 121.7740 },
"Poland": { lat: 51.9194, lon: 19.1451 },
"Germany": { lat: 51.1657, lon: 10.4515 },
"United States": { lat: 37.0902, lon: -95.7129 },
"France": { lat: 46.2276, lon: 2.2137 },
"Egypt": { lat: 26.8206, lon: 30.8025 },
"Pakistan": { lat: 30.3753, lon: 69.3451 },
"Bangladesh": { lat: 23.6850, lon: 90.3563 },
"Indonesia": { lat: -0.7893, lon: 113.9213 },
"Nigeria": { lat: 9.0820, lon: 8.6753 },
"Turkey": { lat: 38.9637, lon: 35.2433 },
"Iran": { lat: 32.4279, lon: 53.6880 },
"Saudi Arabia": { lat: 23.8859, lon: 45.0792 },
"Morocco": { lat: 31.7917, lon: -7.0926 },
"Algeria": { lat: 28.0339, lon: 1.6596 },
"China": { lat: 35.8617, lon: 104.1954 },
"Taiwan": { lat: 23.6978, lon: 120.9605 },
"Singapore": { lat: 1.3521, lon: 103.8198 },
"Malaysia": { lat: 4.2105, lon: 101.9758 },
"Canada": { lat: 56.1304, lon: -106.3468 },
"Australia": { lat: -25.2744, lon: 133.7751 },
"United Kingdom": { lat: 55.3781, lon: -3.4360 },
"Russia": { lat: 61.5240, lon: 105.3188 },
"Ukraine": { lat: 48.3794, lon: 31.1656 },
"Argentina": { lat: -38.4161, lon: -63.6167 },
"Ireland": { lat: 53.4129, lon: -8.2439 },
"South Africa": { lat: -30.5595, lon: 22.9375 },
"New Zealand": { lat: -40.9006, lon: 174.8860 },
"Kenya": { lat: -0.0236, lon: 37.9062 }
};

// Add markers for each country in distribution
Object.keys(distribution).forEach(country => {
if (countryCoords[country]) {
const coords = countryCoords[country];
const intensity = distribution[country] / 100; // Normalize to 0-1

// Convert lat/lon to 3D position
const phi = (90 - coords.lat) * (Math.PI / 180);
const theta = (coords.lon + 180) * (Math.PI / 180);

const radius = 102; // Slightly above globe surface
const x = -(radius * Math.sin(phi) * Math.cos(theta));
const y = radius * Math.cos(phi);
const z = radius * Math.sin(phi) * Math.sin(theta);

// Create marker (small sphere)
const markerGeometry = new THREE.SphereGeometry(1.5 + intensity * 3, 8, 8);
const markerMaterial = new THREE.MeshBasicMaterial({
color: 0xffdd00,
transparent: true,
opacity: 0.7
});
const marker = new THREE.Mesh(markerGeometry, markerMaterial);
marker.position.set(x, y, z);

scene.add(marker);
nameMarkers.push(marker);
}
});
}

// Clear markers from globe
function clearMarkers() {
nameMarkers.forEach(marker => scene.remove(marker));
nameMarkers = [];
}

// Play pronunciation audio
function playPronunciation(name) {
const nameData = nameDatabase[name];
if (!nameData) return;

const audioBtn = document.getElementById(`audioBtn-${name}`);
const loadingEl = document.getElementById(`loading-${name}`);

// Show loading state
audioBtn.classList.add('playing');
loadingEl.style.display = 'inline';

// Use Web Speech API
if ('speechSynthesis' in window) {
const utterance = new SpeechSynthesisUtterance(name);

// Try to set appropriate language based on name origin
if (nameData.origins.includes("Chinese")) {
utterance.lang = 'zh-CN';
} else if (nameData.origins.includes("Arabic")) {
utterance.lang = 'ar-SA';
} else if (nameData.origins.includes("Spanish")) {
utterance.lang = 'es-ES';
} else if (nameData.origins.includes("Russian")) {
utterance.lang = 'ru-RU';
} else {
utterance.lang = 'en-US';
}

utterance.rate = 0.8;
utterance.pitch = 1;

utterance.onend = function() {
audioBtn.classList.remove('playing');
loadingEl.style.display = 'none';
};

utterance.onerror = function() {
audioBtn.classList.remove('playing');
loadingEl.style.display = 'none';
alert(`Could not play pronunciation. Please use the external links for audio pronunciation.`);
};

speechSynthesis.speak(utterance);
} else {
// Fallback if Web Speech API is not available
audioBtn.classList.remove('playing');
loadingEl.style.display = 'none';
alert(`Pronunciation: ${nameData.pronunciation}. Your browser doesn't support audio playback. Please use the external links for audio pronunciation.`);
}
}

// Performance optimization: Clean up on page unload
window.addEventListener('beforeunload', () => {
if (animationId) {
cancelAnimationFrame(animationId);
}
if ('speechSynthesis' in window) {
speechSynthesis.cancel();
}
});

// Initialize the application when the page loads
window.addEventListener('load', init);
</script>
</body>
</html>
